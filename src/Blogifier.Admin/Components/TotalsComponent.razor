@inject HttpClient _http
@inject IStringLocalizer<Resource> _localizer

@if (_model != null)
{
	<div class="app-widget app-widget-stats  d-flex">
		<div class="app-widget-card app-widget-stats-item">
			<span class="app-widget-stats-number">@_model.TotalPosts</span>
			<span class="app-widget-stats-title">@_localizer["posts", true]</span>
		</div>
		<div class="app-widget-card app-widget-stats-item">
			<span class="app-widget-stats-number">0</span>
			<span class="app-widget-stats-title">Pages</span>
		</div>
		<div class="app-widget-card app-widget-stats-item">
			<span class="app-widget-stats-number">@_model.TotalViews</span>
			<span class="app-widget-stats-title">@_localizer["views", true]</span>
		</div>
		<div class="app-widget-card app-widget-stats-item">
			<span class="app-widget-stats-number">@_model.TotalSubscribers</span>
			<span class="app-widget-stats-title">@_localizer["subscribers", true]</span>
		</div>
	</div>
}

@code {
	protected AnalyticsModel _model;

	protected override async Task OnInitializedAsync()
	{
		_model = await _http.GetFromJsonAsync<AnalyticsModel>("api/analytics");
	}
}
